<div class="grid">
    <div class="col-12">
        <div class="card">
            <h5 style="color: #005BA8; font-weight: bold;">Solicitar un Prestamo</h5>
            <p-toast></p-toast>
            <p-toolbar>
                <div class="p-toolbar-group-left flex flex-wrap">
                    <button pTooltip="Volver" pButton type="button" icon="pi pi-angle-left"
                        class="p-button-rounded p-button-text p-button-plain mr-2" (click)="onGoBack()"></button>
                </div>
                <div class="p-toolbar-group-right">
                    <button pButton type="button" label="Guardar" icon="pi pi-save" class="mr-2 p-button-success"
                        (click)="createMeterDialog = true"></button>
                    <button pButton type="button" label="Limpiar" icon="pi pi-refresh" class="p-button-warning mr-2"
                        (click)="onClear()"></button>
                </div>
            </p-toolbar>
        </div>
    </div>
    <div class="col-12">
        <div class="p-fluid p-formgrid grid">
            <div class="col-12 md:col-6">
                <div class="card p-fluid">
                    <div class="field">
                        <label htmlFor="name1">¿Cuánto dinero necesitas que te prestemos?</label>
                        <p-inputNumber [(ngModel)]="amount" inputId="currency-us" mode="currency" currency="USD"
                            locale="en-US" />
                    </div>
                    <div class="field">
                        <label htmlFor="email1">Email</label>
                        <input pInputText id="email1" type="text" />
                    </div>
                    <div class="field">
                        <label htmlFor="age1">Age</label>
                        <input pInputText id="age1" type="text" />
                    </div>
                </div>
            </div>
            <div class="col-12 md:col-6">
                <div class="card p-fluid">
                    <h5>Vertical</h5>
                    <div class="field">
                        <label htmlFor="name1">Name</label>
                        <input pInputText id="name1" type="text" />
                    </div>
                    <div class="field">
                        <label htmlFor="email1">Email</label>
                        <input pInputText id="email1" type="text" />
                    </div>
                    <div class="field">
                        <label htmlFor="age1">Age</label>
                        <input pInputText id="age1" type="text" />
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-12">
        <div class="card">
            <div class="p-fluid p-formgrid grid">
                <div class="field col-12 md:col-4">
                    <label htmlFor="firstname2" class="input-labels">Estado del Medidor</label>
                    <p-dropdown [options]="dropdownItemsState" optionLabel="name" [(ngModel)]="selectedState"
                        placeholder="Seleccione un estado"></p-dropdown>
                </div>
                <div class="field col-12 md:col-4">
                    <label htmlFor="name" class="input-labels">Nombre</label>
                    <input pInputText id="name" type="text" [(ngModel)]="meter.name" placeholder="Ingrese un nombre" />
                </div>
                <div class="field col-12 md:col-4">
                    <label htmlFor="firstname2" class="input-labels">Diámetro</label>
                    <p-dropdown [options]="dropdownItemsDiameter" optionLabel="name" [(ngModel)]="selectedDiameter"
                        placeholder="Seleccione un diámetro"></p-dropdown>
                </div>
                <div class="field col-12 md:col-4">
                    <label htmlFor="brand-meter" class="input-labels">Marca del Medidor</label>
                    <p-dropdown [options]="dropdownBrandMeter" optionLabel="name" [(ngModel)]="selectedBrand"
                        placeholder="Seleccione una marca" (onChange)="loadModelsByBrand()"></p-dropdown>
                </div>
                <div class="field col-12 md:col-4">
                    <label htmlFor="model-meter" class="input-labels">Modelo del Medidor</label>
                    <p-dropdown [options]="dropdownModelMeter" optionLabel="name" [(ngModel)]="selectedModel"
                        placeholder="Seleccione un modelo"></p-dropdown>
                </div>
                <div class="field col-12 md:col-4">
                    <label htmlFor="company" class="input-labels">Empresa</label>
                    <p-dropdown [options]="companies" optionLabel="name" [(ngModel)]="selectedCompany"
                        placeholder="Seleccione una empresa" (onChange)="loadGatewaysByCompany()"></p-dropdown>
                </div>
                <div class="field col-12 md:col-4">
                    <label htmlFor="dev_eui" class="input-labels">Dev EUI</label>
                    <input pInputText id="dev_eui" type="text" [(ngModel)]="meter.dev_eui"
                        placeholder="Ingrese un Dev EUI" />
                </div>
            </div>
        </div>
    </div>
    <div class="col-12" *ngIf="comunicationCheck.includes('LoRaWAN')">
        <div class="card">
            <div class="p-fluid p-formgrid grid">
                <div class="field col-12 md:col-4">
                    <label htmlFor="firstname2" class="input-labels">Clase de apoyo</label>
                    <div class="grid formgrid">
                        <div class="col-12 md:col-4">
                            <div class="field-radiobutton">
                                <p-radioButton name="class" value="A" [(ngModel)]="valClassSupport"
                                    id="classA"></p-radioButton>
                                <label for="classA">Clase A</label>
                            </div>
                        </div>
                        <div class="col-12 md:col-4">
                            <div class="field-radiobutton">
                                <p-radioButton name="class" value="B" [(ngModel)]="valClassSupport"
                                    id="classB"></p-radioButton>
                                <label for="classB">Clase B</label>
                            </div>
                        </div>
                        <div class="col-12 md:col-4">
                            <div class="field-radiobutton">
                                <p-radioButton name="class" value="C" [(ngModel)]="valClassSupport"
                                    id="classC"></p-radioButton>
                                <label for="classC">Clase C</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="field col-12 md:col-4">
                    <label htmlFor="region" class="input-labels">Region</label>
                    <p-dropdown [options]="dropdownItemsRegion" optionLabel="name" [(ngModel)]="selectedRegion"
                        id="regionSelect" placeholder="Seleccione una region"></p-dropdown>
                </div>
                <div class="field col-12 md:col-4">
                    <label htmlFor="typeProduct" class="input-labels">Tipo de Producto</label>
                    <p-dropdown [options]="dropdownItemsProductType" optionLabel="name"
                        [(ngModel)]="selectedTypeProduct" id="typeProductSelect"
                        placeholder="Seleccione un tipo de producto"></p-dropdown>
                </div>
                <div class="field col-12 md:col-4">
                    <label htmlFor="subred" class="input-labels">Subred</label>
                    <p-dropdown [options]="dropdownItemsSubRed" optionLabel="name" [(ngModel)]="selectedSubRed"
                        id="subRedSelect" placeholder="Seleccione una sub-red"></p-dropdown>
                </div>
                <div class="field col-12 md:col-4">
                    <label htmlFor="firstname2" class="input-labels">Tipo de autenticación</label>
                    <div class="grid formgrid">
                        <div class="col-12 md:col-4">
                            <div class="field-radiobutton">
                                <p-radioButton name="typeAutentification" value="OTA" [(ngModel)]="typeAutentification"
                                    id="typeAutentification1"></p-radioButton>
                                <label for="typeAutentification1">OTA</label>
                            </div>
                        </div>
                        <div class="col-12 md:col-4">
                            <div class="field-radiobutton">
                                <p-radioButton name="typeAutentification" value="ABP" [(ngModel)]="typeAutentification"
                                    id="typeAutentification2"></p-radioButton>
                                <label for="typeAutentification2">ABP</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="field col-12 md:col-4" *ngIf="typeAutentification.includes('OTA')">
                    <label htmlFor="lastname2" class="input-labels">App Key</label>
                    <input pInputText id="appKey" type="text" [(ngModel)]="meter.app_key"
                        placeholder="Ingrese un Key" />
                </div>
                <div class="field col-12 md:col-4" *ngIf="typeAutentification.includes('ABP')">
                    <label htmlFor="devAddr" class="input-labels">DevAddr</label>
                    <input pInputText id="devAddr" type="text" [(ngModel)]="meter.dev_addr"
                        placeholder="Ingrese un Dev Addr" />
                </div>
                <div class="field col-12 md:col-4" *ngIf="typeAutentification.includes('ABP')">
                    <label htmlFor="app" class="input-labels">App SKey</label>
                    <input pInputText id="appKey" type="text" [(ngModel)]="meter.app_skey"
                        placeholder="Ingrese una SKey" />
                </div>
                <div class="field col-12 md:col-4" *ngIf="typeAutentification.includes('ABP')">
                    <label htmlFor="lastname2" class="input-labels">Nwk SKey</label>
                    <input pInputText id="appKey" type="text" [(ngModel)]="meter.nwk_skey"
                        placeholder="Ingrese un NWK Key" />
                </div>
            </div>
        </div>
    </div>
    <div class="col-12" *ngIf="comunicationCheck.includes('GPRS')">
        <div class="card">
            <div class="p-fluid p-formgrid grid">
                <div class="field col-12 md:col-4">
                    <label htmlFor="serial" class="input-labels">Número de serie</label>
                    <input pInputText id="serial" type="text" [(ngModel)]="meter.serial"
                        placeholder="Ingrese numero de serie" />
                </div>
                <div class="field col-12 md:col-4">
                    <label htmlFor="directionGprs" class="input-labels">Dirección de la placa</label>
                    <input pInputText id="directionGprs" type="text" [(ngModel)]="meter.direction_gprs"
                        placeholder="Ingrese una direccion GPRS" />
                </div>
            </div>
        </div>
    </div>
    <div class="col-12" *ngIf="comunicationCheck.includes('NB-IoT')">
        <div class="card">
            <div class="p-fluid p-formgrid grid">
                <div class="field col-12 md:col-4">
                    <label htmlFor="imei" class="input-labels">IMEI</label>
                    <input pInputText id="imei" type="text" [(ngModel)]="meter.imei" placeholder="Ingrese un IMEI" />
                </div>
            </div>
        </div>
    </div>
    <div class="col-12" *ngIf="comunicationCheck.includes('Mbus')">
        <div class="card">
            <div class="p-fluid p-formgrid grid">
                <div class="field col-12 md:col-4">
                    <label htmlFor="gateway" class="input-labels">Gateway</label>
                    <p-dropdown [options]="gateways" optionLabel="name" [(ngModel)]="selectedGateway" id="countrySelect"
                        placeholder="Seleccione un Gateway"></p-dropdown>
                </div>
                <div class="field col-12 md:col-4" *ngIf="!comunicationCheck.includes('GPRS')">
                    <label htmlFor="number_serial" class="input-labels">Número de serie</label>
                    <input pInputText id="number_serial" type="text" [(ngModel)]="meter.number_serial"
                        placeholder="Ingrese el numero de serie" />
                </div>
            </div>
        </div>
    </div>
    <p-dialog [(visible)]="createMeterDialog" header="Confirmar" [modal]="true" [style]="{width:'450px'}">
        <div class="flex align-items-center justify-content-center">
            <i class="pi pi-exclamation-triangle mr-3" style="font-size: 2rem"></i>
            <span>¿Está seguro de que desea crear este Medidor?</span>
        </div>
        <ng-template pTemplate="footer">
            <button pButton pRipple icon="pi pi-times" class="p-button-text" label="No"
                (click)="createMeterDialog = false"></button>
            <button pButton pRipple icon="pi pi-check" class="p-button-text" label="Sí" (click)="onSave()"></button>
        </ng-template>
    </p-dialog>
</div>